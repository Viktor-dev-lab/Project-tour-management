extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main
  .container.my-5
    .row
      .col-12
        +box-head(pageTitle)

    // ThÃ´ng tin Ä‘áº·t hÃ ng
    .row.mb-4
      .col-md-8
        .card.shadow-sm.p-4
          h4.text-primary.mb-3 ðŸ“ ThÃ´ng tin Ä‘áº·t hÃ ng
          ul.list-group.list-group-flush
            li.list-group-item MÃ£ Ä‘Æ¡n hÃ ng: 
              strong.text-dark #{order.code}
            li.list-group-item Há» tÃªn: 
              strong.text-dark #{order.fullName}
            li.list-group-item Sá»‘ Ä‘iá»‡n thoáº¡i: 
              strong.text-dark #{order.phone}
            li.list-group-item Ghi chÃº: 
              strong.text-dark #{order.note || 'KhÃ´ng cÃ³'}
            li.list-group-item Tráº¡ng thÃ¡i: 
              span.badge.badge-warning #{order.status}
            li.list-group-item NgÃ y Ä‘áº·t: 
              strong.text-dark #{new Date(order.createdAt).toLocaleDateString()}

      .col-md-4
        .card.bg-light.p-4
          h5.text-success Tá»•ng tiá»n Ä‘Æ¡n hÃ ng
          h3.text-danger.font-weight-bold #{order_item.reduce((sum, item) => sum + item.total, 0).toLocaleString()} VND

    // Danh sÃ¡ch tour Ä‘áº·t
    .row
      .col-12
        .card.shadow-sm
          .card-body
            h4.text-primary.mb-3 ðŸ›« Danh sÃ¡ch tour Ä‘Ã£ Ä‘áº·t
            table.table.table-bordered.table-hover
              thead.table-dark
                tr
                  th áº¢nh
                  th TÃªn tour
                  th GiÃ¡ gá»‘c
                  th GiÃ¡ KM
                  th Sá»‘ lÆ°á»£ng
                  th Tá»•ng tiá»n
              tbody
                each item in order_item
                  tr
                    td 
                      img(src=item.tour.image, alt=item.tour.title, width="80", height="80").rounded.shadow-sm
                    td #{item.tour.title}
                    td.text-decoration-line-through.text-muted #{item.price.toLocaleString()} VND
                    td.text-danger.font-weight-bold #{item.price_special.toLocaleString()} VND
                    td #{item.quantity}
                    td.text-success.font-weight-bold #{item.total.toLocaleString()} VND

    // Tá»•ng tiá»n cuá»‘i trang
    .row.mt-4
      .col-12.text-end
        .alert.alert-success.p-3
          h4 Tá»•ng tiá»n thanh toÃ¡n:
          h2.text-danger.font-weight-bold #{order_item.reduce((sum, item) => sum + item.total, 0).toLocaleString()} VND
