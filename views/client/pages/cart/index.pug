extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main
  .container.my-5
    .row
      .col-12
        +box-head(pageTitle)

    // ThÃ´ng tin Ä‘áº·t hÃ ng
    .row.mb-4
      .col-md-8
        .card.shadow-lg.border-0.p-4(style="background: linear-gradient(135deg, #f8f9fa, #e9ecef); border-radius: 12px;")
          h4.text-primary.mb-3 ðŸ“ ThÃ´ng tin Ä‘áº·t hÃ ng
          ul.list-group.list-group-flush
            li.list-group-item.bg-transparent.border-0.font-weight-bold MÃ£ Ä‘Æ¡n hÃ ng: 
              span.text-dark #{order.code}
            li.list-group-item.bg-transparent.border-0.font-weight-bold Há» tÃªn: 
              span.text-dark #{order.fullName}
            li.list-group-item.bg-transparent.border-0.font-weight-bold Sá»‘ Ä‘iá»‡n thoáº¡i: 
              span.text-dark #{order.phone}
            li.list-group-item.bg-transparent.border-0.font-weight-bold Ghi chÃº: 
              span.text-dark #{order.note || 'KhÃ´ng cÃ³'}
            li.list-group-item.bg-transparent.border-0.font-weight-bold Tráº¡ng thÃ¡i: 
              span.badge.badge-warning.p-2 #{order.status}
            li.list-group-item.bg-transparent.border-0.font-weight-bold NgÃ y Ä‘áº·t: 
              span.text-dark #{new Date(order.createdAt).toLocaleDateString()}

      .col-md-4
        .card.bg-gradient.text-white.p-4(style="background: linear-gradient(135deg, #28a745, #218838); border-radius: 12px;")
          h5.text-white.font-weight-bold.text-center Tá»•ng tiá»n Ä‘Æ¡n hÃ ng
          h3.text-warning.text-center.font-weight-bold #{order_item.reduce((sum, item) => sum + item.total, 0).toLocaleString()} VND

    // Danh sÃ¡ch tour Ä‘áº·t
    .row
      .col-12
        .card.shadow-sm.border-0
          .card-body
            h4.text-primary.mb-3 ðŸ›« Danh sÃ¡ch tour Ä‘Ã£ Ä‘áº·t
            table.table.table-striped.table-hover.text-center.shadow-sm
              thead.table-dark.text-white
                tr
                  th áº¢nh
                  th TÃªn tour
                  th GiÃ¡ gá»‘c
                  th GiÃ¡ KM
                  th Sá»‘ lÆ°á»£ng
                  th Tá»•ng tiá»n
              tbody
                each item in order_item
                  tr
                    td 
                      img(src=item.tour.image, alt=item.tour.title, width="70", height="70").rounded-circle.shadow-sm
                    td.text-left.font-weight-bold #{item.tour.title}
                    td.text-decoration-line-through.text-muted.font-italic #{item.price.toLocaleString()} VND
                    td.text-danger.font-weight-bold #{item.price_special.toLocaleString()} VND
                    td.text-dark #{item.quantity}
                    td.text-success.font-weight-bold #{item.total.toLocaleString()} VND

    // Tá»•ng tiá»n cuá»‘i trang
    .row.mt-4
      .col-12.text-center
        .alert.alert-success.p-4.rounded-lg.shadow-lg
          h4.font-weight-bold Tá»•ng tiá»n thanh toÃ¡n:
          h2.text-danger.font-weight-bold #{order_item.reduce((sum, item) => sum + item.total, 0).toLocaleString()} VND
