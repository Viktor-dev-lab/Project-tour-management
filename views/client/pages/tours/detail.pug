extends ../../layouts/default.pug
include ../../mixins/box-head.pug

block main
  .container.tour-detail-container.my-5
    .row
      .col-12
        +box-head(pageTitle)

    if toursDetail
      .row.g-5.align-items-center
        .col-md-6
          .tour-image-wrapper
            img.img-fluid.w-100.shadow-lg.rounded-3.animated-img(src=toursDetail.images[0], alt=toursDetail.title)

        .col-md-6
          .tour-info.p-4.shadow-sm.rounded-3
            h2.text-primary.fw-bold.animated-text #{toursDetail.title}
            p.tour-code.text-muted M√£ tour: #{toursDetail.code}

            .price.mt-3
              if toursDetail.discount > 0
                del.text-danger.fs-5 #{toursDetail.price.toLocaleString()} ƒë
                br
                strong.text-success.fs-4 Gi√° khuy·∫øn m√£i: #{toursDetail.price_special.toLocaleString()} ƒë
              else
                strong.text-primary.fs-4 Gi√°: #{toursDetail.price.toLocaleString()} ƒë

            p.mt-3
              strong Th√¥ng tin: 
              span.text-muted.ms-2 #{toursDetail.information}

            p.mt-3
              strong Ng√†y kh·ªüi h√†nh: 
              span.text-muted.ms-2 #{new Date(toursDetail.timeStart).toLocaleDateString("vi-VN")}

            p.mt-3
              strong S·ªë l∆∞·ª£ng c√≤n: 
              span.text-muted.ms-2 #{toursDetail.stock}

            //- FORM GI·ªé H√ÄNG
            form#cartForm.mt-4(action="/cart/add", method="POST")
              input(type="hidden", name="tour_id", value=toursDetail.id, min="1", max=toursDetail.stock)

              .d-flex.align-items-center.gap-3
                label.fw-bold.text-muted(for="quantity") S·ªë l∆∞·ª£ng:
                input#quantity.form-control.w-25.text-center(type="number", name="quantity", min="1", max=toursDetail.stock, value="1")

              .mt-4
                button.btn.btn-success.shadow-sm.btn-lg.animated-btn(type="submit") üõí Th√™m v√†o gi·ªè
                a.btn.btn-primary.shadow-sm.btn-lg.animated-btn.ms-3(href="/booking/#{toursDetail.slug}") üöÄ ƒê·∫∑t ngay

      //- L·ªãch tr√¨nh Tour - Hi·ªÉn th·ªã theo d·∫°ng Timeline chuy√™n nghi·ªáp
      .row.mt-5
        .col-12
          h3.text-center.text-uppercase.text-primary.mb-4 ‚è≥ L·ªãch Tr√¨nh Chi Ti·∫øt

        .col-12
          .timeline
            each day, index in toursDetail.schedule.split("\n")
              .timeline-item
                .timeline-icon
                  i.fas.fa-calendar-day
                .timeline-content
                  h5 Ng√†y #{index + 1}
                  p.text-muted #{day}

      //- H√¨nh ·∫£nh kh√°c c·ªßa Tour
      .row.mt-5
        .col-12
          h3.text-center.text-uppercase.text-primary.mb-4 üì∏ H√¨nh ·∫£nh kh√°c
        .col-12.d-flex.flex-wrap.justify-content-center
          each imgUrl in toursDetail.images.slice(1)
            .col-md-3.col-sm-4.col-6.p-2
              .image-thumbnail-wrapper
                img.img-thumbnail.w-100.rounded-3.shadow-sm.animated-img(src=imgUrl, alt="H√¨nh ·∫£nh tour")

    else
      .text-center.text-danger
        h3 Tour kh√¥ng t·ªìn t·∫°i!
